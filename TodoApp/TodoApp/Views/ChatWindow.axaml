<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
			 xmlns:icons="clr-namespace:Material.Icons.Avalonia;assembly=Material.Icons.Avalonia"
			 xmlns:vm="using:TodoApp.ViewModels"
			 xmlns:models="using:TodoApp.Models"
			 xmlns:services="using:TodoApp.Services"
			 xmlns:mock="using:TodoApp.Design"
             mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="450"
             x:Class="TodoApp.Views.ChatWindow"
			 x:DataType="vm:ChatViewModel"
			 x:CompileBindings="True">
	<Design.DataContext>
		<vm:ChatViewModel>
			<x:Arguments>
				<services:CurrentTodoService>
					<services:CurrentTodoService.CurrentTodo>
						<models:TodoItem Title="I want to learn C#" Description="I really wanna"/>
					</services:CurrentTodoService.CurrentTodo>
				</services:CurrentTodoService>					
				<mock:DesignChatService/>
			</x:Arguments>
		</vm:ChatViewModel>
	</Design.DataContext>

	<Grid ColumnDefinitions="*, 2*" RowDefinitions="*, Auto">
		<StackPanel Spacing="5" Margin="10">
			<TextBlock Classes="h1">Todo Title</TextBlock>
			<TextBlock Text="{Binding TodoItem.Title}"/>

			<TextBlock Classes="h1">Todo Description</TextBlock>
			<TextBlock Text="{Binding TodoItem.Description}"/>

			<Button HorizontalAlignment="Stretch" Command="{Binding AskForHelpCommand}">
				<StackPanel Orientation="Horizontal" Spacing="5" HorizontalAlignment="Center">
					<icons:MaterialIcon Kind="RobotOutline"></icons:MaterialIcon>
					<TextBlock>Ask for help</TextBlock>
				</StackPanel>
			</Button>
		</StackPanel>

		<StackPanel Spacing="5" Grid.Column="1">
			<TextBlock HorizontalAlignment="Center">Chat help</TextBlock>

			<TextBlock Text="{Binding ChatResponse}"></TextBlock>
		</StackPanel>

		<ProgressBar Grid.ColumnSpan="2" Grid.Row="1" Margin="10" IsIndeterminate="True" IsVisible="{Binding AskForHelpCommand.IsRunning}"/>
	</Grid>
</UserControl>

